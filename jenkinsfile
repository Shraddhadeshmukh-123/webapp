pipeline {
    agent any

    stages {
        stage('git') {
            steps {
                echo 'Hello World'
                git credentialsId: 'jenkins-key', url: 'https://github.com/Shraddhadeshmukh-123/webapp.git'
            }
        }
       stage('build') {
       steps {
       sh "cd /mnt"
        sh "mvn clean install" 
        sh "mv /webapp/target/WebApp.war /mnt"
       }
       }
       stage('deploy')
        {
        steps {
        sshagent(['jenkins-key']) {
       sh """
       cp WebApp.war /mnt/apache-tomcat-9.0.70/webapps
       ssh ec2-user@172.31.43.115 /mnt/apache-tomcat-9.0.70/bin/shutdown.sh
       ssh ec2-user@172.31.43.115 /mnt/apache-tomcat-9.0.70/bin/startup.sh
       """
}
     
     }
        }
}
}
